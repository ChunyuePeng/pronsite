<!doctype html>
<html lang="en">

<head>

    <!-- Basic Page Needs
    ================================================== -->
    <title>GoTube Streaming Video HTML Template</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="GoTube is - Professional A unique and beautiful collection of UI elements">
    <link rel="icon" href="assets/images/favicon.png">

    <!-- CSS 
    ================================================== -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/night-mode.css">
    <link rel="stylesheet" href="assets/css/framework.css">

    <!-- icons
    ================================================== -->
    <link rel="stylesheet" href="assets/css/icons.css">

    <!-- Google font
    ================================================== -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <style>
        input::-webkit-input-placeholder{
            color: red;
        }
        input::-moz-placeholder{
            color: red;
        }
        input:-moz-placeholder{
            color: red;
        }
        input:-ms-input-placeholder{
            color: red;
        }
    </style>

</head>

<body>


<!-- Content
================================================== -->
<div uk-height-viewport="expand: true" class="uk-flex uk-flex-middle">
    <div class="uk-width-1-3@m uk-width-1-2@s m-auto">
        <div class="uk-card-default p-6 rounded">
            <div class="my-4 uk-text-center">
                <h2 class="mb-0">Create new a Account</h2>
                <p class="my-2">Fill blank to create new account.</p>
            </div>
            <form class="uk-child-width-1-1 uk-grid-small" uk-grid>

                <div>
                    <div class="uk-form-group">
                        <label class="uk-form-label"> Name</label>

                        <div class="uk-position-relative w-100">
                                <span class="uk-form-icon">
                                    <i class="icon-feather-user"></i>
                                </span>
                            <input id="name" class="uk-input" type="text" placeholder="Full name" onchange="function
                            validateName(value) {
                                if (value != undefined && value != ''){
                                    nameValid = true;
                                }else {
                                    nameValid = false;
                                }
                            }
                            validateName(this.value)">
                        </div>

                    </div>
                </div>
                <div>
                    <div class="uk-form-group">
                        <label class="uk-form-label"> Email</label>

                        <div class="uk-position-relative w-100">
                                <span class="uk-form-icon">
                                    <i class="icon-feather-mail"></i>
                                </span>
                            <input class="uk-input" type="email" placeholder="name@example.com" id="email"
                                   onchange="function validateEmail(object) {
                                       var reg = new
                                       RegExp('^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$');
                                       if (reg.test(object.value)){
                                           mailValid = true;
                                       }else{
                                           object.value = '';
                                           object.placeholder = '邮箱格式错误';
                                           mailValid = false;
                                       }
                                   }
                                   validateEmail(this)" >
                        </div>

                    </div>
                </div>

                <div class="uk-width-1-2@s">
                    <div class="uk-form-group">
                        <label class="uk-form-label"> Password</label>

                        <div class="uk-position-relative w-100">
                                <span class="uk-form-icon">
                                    <i class="icon-feather-lock"></i>
                                </span>
                            <input class="uk-input" type="password" placeholder="" id="ps1">
                        </div>

                    </div>
                </div>
                <div class="uk-width-1-2@s">
                    <div class="uk-form-group">
                        <label class="uk-form-label"> Confirm password</label>

                        <div class="uk-position-relative w-100">
                                <span class="uk-form-icon">
                                    <i class="icon-feather-lock"></i>
                                </span>
                            <input class="uk-input" type="password" placeholder="" id="ps2"
                                   onchange="function validatePassword(object) {
                                       var ps1 = $('#ps1').val();
                                       if (ps1 == object.value){
                                           passwordValid = true;
                                       }else {
                                           object.value = '';
                                           object.placeholder = '两次输入的密码不一致';
                                           passwordValid = false;
                                       }
                                   }
                                   validatePassword(this)">
                        </div>

                    </div>
                </div>

                <div>
                    <div class="mt-4 uk-flex-middle uk-grid-small" uk-grid>
                        <div class="uk-width-expand@s">
                            <p> Do you have account <a href="form-login.html">Sign in</a></p>
                        </div>
                        <div class="uk-width-auto@s">
                            <input class="button warning" value="Get Started" onclick="register()">
                        </div>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>

<script>
    (function (window, document, undefined) {
        'use strict';
        if (!('localStorage' in window)) return;
        var nightMode = localStorage.getItem('gmtNightMode');
        if (nightMode) {
            document.documentElement.className += ' night-mode';
        }
    })(window, document);


    (function (window, document, undefined) {

        'use strict';

        // Feature test
        if (!('localStorage' in window)) return;

        // Get our newly insert toggle
        var nightMode = document.querySelector('#night-mode');
        if (!nightMode) return;

        // When clicked, toggle night mode on or off
        nightMode.addEventListener('click', function (event) {
            event.preventDefault();
            document.documentElement.classList.toggle('night-mode');
            if (document.documentElement.classList.contains('night-mode')) {
                localStorage.setItem('gmtNightMode', true);
                return;
            }
            localStorage.removeItem('gmtNightMode');
        }, false);

    })(window, document);
</script>

<!-- javaScripts
        ================================================== -->
<script src="assets/js/framework.js"></script>
<script src="assets/js/jquery-3.3.1.min.js"></script>
<script src="assets/js/simplebar.js"></script>
<script src="assets/js/main.js"></script>
<script src="assets/js/server.js"></script>
<script src="assets/js/axios.min.js"></script>
<script src="assets/js/myaxios.js"></script>
<script>
var mailValid = false;
var nameValid = false;
var passwordValid = false;
function register() {
    if (!nameValid){
        alert('请输入用户名');
        return;
    }
    if (!mailValid){
        alert('请输入邮箱');
        return;
    }
    if (!passwordValid){
        alert('两次输入密码不一致');
        return;
    }
     let data={name:$('#name').val(),password:$('#ps2').val(),email:$('#email').val()};
    my_axios({
        method: "post",
        url: "/user/register",
        data: data
    }).then(function (response) {
        alert(response.msg)
    }).catch(function (reason) {
        alert(reason.msg)
    })




}
</script>
</body>

</html>